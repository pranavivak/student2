---
toc: true
comments: true
layout: post
title: Passion Project - The Code that I Comitted
type: tangibles
courses: { compsci: {week: 7 } }
---

This project is intended to search the near by art museums based on the user entered zip code. You can enhance this project by adding more fields in the FE like search criteria or radius and pass them also to backend along with zip code. It is developed using flask web application framework and python.

The user entered zip code is passed as request parameter to the backend.  Since zip code is available in request , it can be retrieved in the backend code from the request. We first invoked one api named **** to get the longitude and latitude of the user entered zip code since these 2 fields are required as input to the Google maps APIâ€™s search nearby places method. This google maps API also need API key that you guys generated by creating account.

You use docker container to deploy the application in EC2 instance (instance name is CSP)  of the AWS. Docker container is a virtual operating environment with everything the software needs to run like all the libraries , system tools, code and runtime

When you run the command docker build -d  , it creates the docker container for the application with all the dependent libraries that can be deployed easily in EC2 instance.

I mainly worked on the Deployment to AWS, Model Geocoding, and a part of the API Geocoding.

## My Main Code
from flask import Flask, jsonify, request
import requests
import pgeocode
import googlemaps

app = Flask(__name__)
places_api_url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json"
api_key = 'AIzaSyDwh-rt_rOBI3qhUZwaFiHN0Qba4zyVZwc'
    
def initGeocoding(postalcode,country):
      
    nomi = pgeocode.Nominatim(country)
    postal_code = postalcode
    location = nomi.query_postal_code(postalcode)
    print("coordinates")
    print(location.latitude, location.longitude)
    latitude = location.latitude
    longitude = location.longitude
      
    print(latitude)

    #places_api_url ="https://maps.googleapis.com/maps/api/place/nearbysearch/json?keyword=restaurent&location=-33.8670522,151.1957362&radius=1500&type=restaurant&key="+api_key
    places_api_url ="https://maps.googleapis.com/maps/api/place/nearbysearch/json?keyword=art museum&location="+str(latitude)+","+str(longitude)+"&radius=1500&type=art museum&key="+api_key
    
    params = {
        'keyword': 'restaurent',
        'location': {'latitude' : latitude ,'longitude' : longitude},
        'radius': 1000000,
        'key': api_key,
    }
    
    response = requests.get(places_api_url, params=params)
    results = response.json().get('results',[])
    #print("results")
    #print(response.json())   

    print(results)
        
    museums_info = []
    for result in results:
        museum_info = {
            'name': result.get('name'),
            'vicinity': result.get('vicinity'),
            #'rating': result.get('rating', 'N/A'),
            #'open': result.get('opening_now'),
        }
        museums_info.append(museum_info)
    return museums_info 
    

def searchMuseums(zipcode):
    museums_info = initGeocoding(zipcode,'US')
    return jsonify({'art_museums': museums_info})
if __name__ == '__main__':
    app.run()


## Issue Grading
- Average score: 9.75/10